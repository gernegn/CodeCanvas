/* =========================================
   1. Global & Base
========================================= */
html, body {
    height: 100%;
    margin: 0;
    overflow: hidden;
}

body {
    background: linear-gradient(to bottom, #31BEF3, #fff);
    font-family: 'IBM Plex Sans Thai', sans-serif;
}

.container {
    position: relative;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}

.bg-grass {
    position: absolute;
    bottom: 0;
    line-height: 0;
    z-index: 2;
}

.bg-grass img {
    width: 100%;
    object-fit: cover;
}

.bg-cloud {
    position: absolute;
    line-height: 0;
    z-index: 3;
    top: -30px;
}

.bg-cloud img {
    width: 100%;
    object-fit: cover;
}

/* =========================================
   2. Header Section
========================================= */
.sec-head {
    /* ✅ เปลี่ยนเป็น Absolute ตรึงไว้ขอบบนสุด */
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    margin: 3rem 4rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 30;
}

.btn-box {
    width: 9rem;
    height: 4rem;
    display: flex;
    align-items: center;
}

.bt-back {
  background: transparent;
  border: none;
  padding: 0;
  cursor: pointer;
  width: 3.5rem;
  height: 3.5rem;
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.bt-back .iconify {
  font-size: 2.5rem;
  color: #000;
  transform: translateX(8px);
}

.bt-back:hover {
    background: #D4F2FF;
    transform: scale(1.08);
}

.challenge {
  font-weight: 500;
  font-size: 2.5rem;
  margin: 0;
  /* ✅ จัดข้อความให้อยู่ตรงกลางเป๊ะๆ */
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.sec-head img {
    width: 9rem;
    height: 4rem;
    object-fit: cover;
    cursor: pointer;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* =========================================
   3. Main Content Layout (Absolute Center)
========================================= */
.sec-content {
    /* ✅ สูตรจัดกึ่งกลางหน้าจอแบบตายตัว */
    position: absolute;
    z-index: 15;
    width: 91%;
    height: 77%;

    top: 58%;
    left: 50%;
    transform: translate(-50%, -50%);

    display: flex;
    justify-content: space-between;
    align-items: center;
}

.sec-content-left {
    width: 65%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.sec-content-right {
    width: 32%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

/* =========================================
   4. Canvas Area
========================================= */
.canvas {
    background: #fff4eb;
    width: 100%;
    height: 85%;
    border-radius: 20px;
    overflow: hidden;
    position: relative;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}

#gameCanvas {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.bt-options {
    position: absolute;
    top: 1.25rem;
    right: 1.25rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    z-index: 20;
}

/* ✅ แปลงขนาดปุ่มเป็น rem ให้ขยายบนทีวีได้ */
.bt-undo, .bt-redo {
    background: #ffc873;
    width: 3.75rem;
    height: 3.75rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.bt-undo .iconify, .bt-redo .iconify {
    font-size: 2rem;
    color: #ca6e3c;
    transition: color 0.2s;
}

.bt-reset {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.reset {
    background: #ffc873;
    color: #ca6e3c;
    border: none;
    padding: 0 1.5rem;
    border-radius: 3rem;
    font-size: 1.6rem;
    font-weight: 500;
    cursor: pointer;
    height: 3.75rem;
    width: 8.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    font-family: inherit;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.reset:hover, .bt-undo:hover, .bt-redo:hover {
    background: #ffb84d;
    color: #fff;
    transform: scale(1.1);
    box-shadow: 0 4px 10px rgba(255, 184, 77, 0.4);
}

.bt-undo .iconify:hover, .bt-redo .iconify:hover {
    color: #fff;
}

/* =========================================
   5. Code Box
========================================= */
.code-box {
    background: #fff;
    width: 100%;
    height: 12%;
    border-radius: 6rem;
    display: flex;
    align-items: center;
    padding: 0 1.5rem;
    gap: 0.8rem;
    overflow-x: auto;
    box-sizing: border-box;
}

.item-forward { background-color: #62D4FF; color: #000; }
.item-moveleft { background-color: #FE9A00; color: #000; }
.item-moveright { background-color: #FF98B8; color: #000; }

.code-item {
    padding: 0.5rem 1.25rem;
    border-radius: 50px;
    font-weight: 500;
    font-size: 1.2rem;
    white-space: nowrap;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border: none;
    animation: codePopIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* กล่องโค้ดเส้นประว่างๆ (Placeholder) */
.code-item-placeholder {
    border: 2px dashed #ccc !important; /* ปรับเส้นประให้คมชัดขึ้น */
    background-color: transparent !important;
    color: transparent !important; /* ซ่อนตัวหนังสือไว้เพื่อดึงขนาดกล่อง */
    box-sizing: border-box;
    box-shadow: none !important;
    border-radius: 50px;
    height: 2.8rem !important;
}

/* =========================================
   6. Example Image (Right Panel)
========================================= */
.example-img {
    width: 100%;
    height: 53%;
    display: flex;
    justify-content: center;
}

.frame-box {
    width: 100%;
    height: 100%;
    background: white;
    border-radius: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.frame-img {
    width: 85%;
    height: 90%;
    background: white;
    border-radius: 20px;
    object-fit: contain;
}

/* =========================================
   7. Buttons Command Grid
========================================= */
.bt-command {
    width: 100%;
    height: 60%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    margin-top: 1rem;
    align-items: flex-end;
}

.bt-code-grid {
    display: grid;
    grid-template-areas:
        "forward forward"
        "left right";
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1.3fr 1.3fr;
    gap: 0.8rem;
    width: 100%;
    height: 68%;
}

.forward, .moveleft, .moveright {
    background: transparent !important;
    border: none !important;
    color: white;
    font-family: 'IBM Plex Sans Thai', sans-serif;
    font-weight: 600;
    cursor: pointer;
    padding: 0;
}

.bt-forward-item { grid-area: forward; background-color: #62D4FF; border: 8px solid #4EB8E0; display: flex; align-items: end; justify-content: space-between; padding: 0.5rem 1.5rem; }
.bt-left-item { grid-area: left; background-color: #FE9A00; border: 8px solid #E58B00; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0.3rem; }
.bt-right-item { grid-area: right; background-color: #FF98B8; border: 8px solid #EE789D; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0.3rem; }

.bt-item {
    box-sizing: border-box;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.bt-item:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 15px rgba(0,0,0,0.15);
}

.bt-item:active {
    transform: scale(0.95); /* ทำให้ยุบตอนคลิก */
    border-bottom-width: 2px;
}

.forward { font-size: 1.5rem; font-weight: 500; }
.moveleft, .moveright { font-size: 1.3rem; font-weight: 500; }

/* ✅ ปรับไอคอนปุ่มให้เล็กลงเล็กน้อย */
.bt-item img { height: 2.6rem; width: auto; object-fit: contain; } /* ลดจาก 3.2rem */
.forward-img { height: 3.6rem !important; margin-bottom: 0.5rem; } /* ลดจาก 4.5rem */

/* =========================================
   8. RUN Button
========================================= */
.bt-run-container {
    width: 60%;
    height: 22%;
    display: flex;
    justify-content: flex-end;
}

.run {
    width: 100%;
    height: 100%;
    background-color: #989898;
    color: white;
    border: none;
    border-radius: 50px;
    font-size: 1.7rem;
    font-weight: 600;
    cursor: pointer;
    font-family: 'IBM Plex Sans Thai', sans-serif;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.run:hover {
    background-color: #19b56d; /* เปลี่ยนเป็นสีเขียวตอนชี้ให้ดูน่ากด */
    transform: scale(1.05);
    box-shadow: 0 8px 15px rgba(25, 181, 109, 0.3);
}

.run:active {
    transform: scale(0.95);
    box-shadow: none;
}

/* =========================================
   9. Tutorial Modal Styles
========================================= */
.tutorial-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 9999; display: flex; justify-content: center; align-items: center; }

/* ✅ 1. ปรับขนาดกล่องให้เท่ากับหน้า Random */
.tutorial-box {
    background-color: #fff;
    width: 48rem;
    height: 33rem;
    border-radius: 20px; /* ปรับขอบให้มน 20px เท่า Random */
    padding: 1.5rem 2rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    position: relative;
}

/* ✅ 2. ปรับตำแหน่งปุ่มปิดให้อยู่ตำแหน่งเดียวกับ Random */
.close-tutorial {
    position: absolute;
    top: 1.5rem;
    right: 2rem;
    font-size: 3rem;
    color: #aaa;
    cursor: pointer;
    z-index: 10;
    transition: transform 0.2s, color 0.2s;
    line-height: 0;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.close-tutorial:hover { color: #000; transform: scale(1.1); }

.tutorial-title {
    font-family: 'IBM Plex Sans Thai', sans-serif;
    font-size: 2rem;
    color: #333;
    margin: 0.5rem 0 0.5rem 0;
    font-weight: 600;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.slider-container { display: flex; align-items: center; justify-content: center; width: 100%; flex-grow: 1; position: relative; gap: 10px; margin-bottom: 5px; }
.slider-wrapper { width: 90%; height: auto; display: flex; justify-content: center; align-items: center; overflow: hidden; position: relative; }

/* ✅ 3. ลด max-height ของรูปลง เพื่อให้พอดีกับกล่องที่เตี้ยลง */
.tutorial-slide {
    display: none;
    width: 83%;
    height: 83%;
    object-fit: contain;
    border-radius: 1.2rem;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.tutorial-slide.active { display: block; animation: fadeEffect 0.5s; }

@keyframes fadeEffect { from {opacity: 0.4;} to {opacity: 1;} }
.slider-btn { background: none; border: none; cursor: pointer; color: #aaa; font-size: 3rem; padding: 0; transition: transform 0.2s; display: flex; align-items: center; z-index: 5; }
.slider-btn:hover { color: #333; transform: scale(1.1); }

.pagination-dots {
    text-align: center;
    margin-bottom: 10px;
    height: 20px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.dot { cursor: pointer; height: 1rem; width: 1rem; margin: 0 6px; background-color: #ddd; border-radius: 50%; display: inline-block; transition: background-color 0.3s ease; }
.dot.active, .dot:hover { background-color: #27AE60; }
button, .bt-item, .code-box, .challenge { user-select: none; -webkit-user-select: none; }

/* =========================================
   10. SweetAlert (Reset Popup Design)
========================================= */
.my-swal-popup {
    background-color: #fff !important;
    border-radius: 20px !important;
    padding: 3rem 2.5rem 2.5rem 2.5rem !important;
    font-family: 'IBM Plex Sans Thai', sans-serif !important;

    /* ✅ เปลี่ยนจาก 800px เป็น rem เพื่อให้ขนาดพอดีบน Desktop และขยายบนทีวี */
    width: 40rem !important;
    max-width: 90vw !important; /* กันล้นขอบจอในกรณีจอเล็กมากๆ */
    box-shadow: 0 10px 40px rgba(0,0,0,0.2) !important;
}

.my-swal-title {
    color: #6daafc !important;
    font-size: 2.2rem !important;
    font-weight: 600 !important;
    margin-bottom: 0.5rem !important;
    padding: 0 !important;
}

.my-swal-text {
    color: #000 !important;
    font-size: 1.6rem !important;
    font-weight: 500 !important;
    margin: 0 0 2.5rem 0 !important;
    padding: 0 !important;
}

.my-swal-actions {
    display: flex !important;
    flex-direction: row !important;
    gap: 1.5rem !important;
    width: 100% !important;
    justify-content: center !important;
    margin: 0 !important;
}

/* ✅ รวม Style ของปุ่มทั้ง 2 ไว้ด้วยกันเพื่อลดโค้ดซ้ำ และเปลี่ยนจาก px เป็น rem */
.my-swal-cancel, .my-swal-confirm {
    border-radius: 12px !important;
    font-size: 1.6rem !important;
    font-weight: 500 !important;
    font-family: inherit !important;
    width: 12rem !important;
    height: 4.5rem !important;
    margin: 0 !important;
    box-shadow: none !important;
    cursor: pointer !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important; /* เพิ่มเอฟเฟกต์สมูทตอน Hover */
}

/* ปุ่มยกเลิก */
.my-swal-cancel {
    background-color: #fff !important;
    color: #000 !important;
    border: 2px solid #6daafc !important;
}
.my-swal-cancel:hover {
    transform: scale(1.05) !important;
}

/* ปุ่มยืนยัน (เริ่มใหม่) */
.my-swal-confirm {
    background-color: #6daafc !important;
    color: #000 !important;
    border: 2px solid #6daafc !important;
}
.my-swal-confirm:hover {
    transform: scale(1.05) !important;
}

/* =========================================
   UI الإضافเพิ่มเติม (เปอร์เซ็นต์, แจ้งเตือน, กรอบว่าง)
========================================= */
.progress-circle {
    position: absolute;
    bottom: 2rem;
    left: 2rem;
    width: 4rem;  /* ขยายขนาดกล่องให้ใหญ่ขึ้น */
    height: 4rem;
    border-radius: 50%;
    /* ใช้สีเขียวอ่อนแบบในรูป และส่วนที่ยังไม่ถึงให้เป็นสีขาว */
    background: conic-gradient(#bce051 0%, #ffffff 0%);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 15;
}

/* ปรับกล่องตัวหนังสือข้างในให้ใส เพื่อให้เห็นกราฟวงกลมเต็มๆ */
.inner-circle {
    background-color: transparent; /* เอาพื้นหลังสีขาวออก */
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.15rem; /* ขยายตัวหนังสือให้ใหญ่แบบในรูป */
    font-weight: 500;
    color: #000;       /* ตัวหนังสือสีดำเข้ม */
    font-family: 'IBM Plex Sans Thai', sans-serif;
    z-index: 16;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* ✅ กล่องข้อความให้กำลังใจ (Cheer Tooltip) */
.cheer-tooltip {
    position: absolute;
    bottom: 7.5rem; /* ยกให้สูงกว่าวงกลมเปอร์เซ็นต์ */
    left: 2rem;     /* ชิดซ้ายให้ตรงกับวงกลม */
    background-color: #fce2a6; /* สีพื้นหลังส้มครีมตามรูป */
    color: #000;
    padding: 10px 20px;
    border-radius: 15px;
    font-size: 1.4rem;
    font-weight: 500;
    font-family: 'IBM Plex Sans Thai', sans-serif;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    z-index: 25;
    pointer-events: none;
    /* ซ่อนไว้เป็นค่าเริ่มต้น */
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px); /* ให้มีแอนิเมชันเด้งขึ้น */
    transition: all 0.3s ease-in-out;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* ติ่งลูกศรชี้ลงของกล่องให้กำลังใจ */
.cheer-tooltip::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 20px; /* ขยับติ่งให้ตรงกับขอบวงกลม */
    border-width: 10px 10px 0;
    border-style: solid;
    border-color: #fce2a6 transparent transparent transparent;
}

/* คลาสสำหรับโชว์ข้อความให้กำลังใจ */
.cheer-tooltip.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.error-tooltip {
    position: absolute;
    background-color: #ffb8ca; /* สีชมพูตามรูป */
    color: #333;
    padding: 8px 18px;
    border-radius: 15px;
    font-size: 1.1rem;
    font-weight: 500;
    font-family: 'IBM Plex Sans Thai', sans-serif;
    z-index: 25;
    pointer-events: none;

    /* ซ่อนไว้เป็นค่าเริ่มต้น */
    opacity: 0;
    visibility: hidden;
    transform: translate(-50%, -150%);
    transition: all 0.2s ease-in-out;
}

/* ติ่งลูกศรชี้ลงของกล่องข้อความ */
.error-tooltip::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 8px 8px 0;
    border-style: solid;
    border-color: #ffb8ca transparent transparent transparent;
}

/* =========================================
   11. Responsive สำหรับ TV
========================================= */
@media screen and (min-width: 1920px) { html { font-size: 22px; } }
@media screen and (min-width: 2560px) { html { font-size: 30px; } }
@media screen and (min-width: 3840px) { html { font-size: 42px; } }
